<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="https://apaam.github.io/netdem_docs/img/favicon.ico">
        <meta name="keywords" content="Finite Element Library,Finite Element Code,Finite Element Method Library,Finite Element Method Code,Finite Element C++,Finite Element Method C++,Finite Element Library C++,Finite Element Code C++,FEM Code,FEM Library,FEM C++">
        <meta name="google-site-verification" content="45K56TawSdzbgy-uDtfJdYwp7zaVdL3fIAGYt869wwU" />
<!--	<title></title>  -->
        <title>NetDEM - Neural Network Enabled Discret Element Method</title>

        <link href="../../css/bootstrap-bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/highlight.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://apaam.github.io/netdem_docs/">NetDEM</a>
        </div>

        <script>var base_url = '../..';</script>
        <!-- <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script> -->

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="../../examples/">Examples</a>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                            <li >
                                 <a href="../user_manual/">User manual</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../developer_manual/">Developer manual</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../dem_wiki/">DEM wiki</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../doxygen/html/">Code doxygen</a>
                            </li>
                        
                    
                    </ul>
                </li>
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="../../download/">Download</a>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Gallery <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                            <li >
                                 <a href="../../gallery/snapshots/">Snapshots</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../gallery/animations/">Animations</a>
                            </li>
                        
                    
                    </ul>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                            <li >
                                 <a href="../../about/news_%26_updates/">News & Updates</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../about/help_%26_support/">Help & Support</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../about/publications/">Publications</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../about/acknowledgement/">Acknowledgements</a>
                            </li>
                        
                    
                    </ul>
                </li>
            
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li class="nav-item">
                    <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                
                <li>
                    <a href="https://github.com/apaam/netdem_docs">
                        
                            <i class="fa fa-github-square"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        
        <div class="container">
            
            <div class="col-md-3 visible-xs visible-sm"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#_1"></a></li>
        
    
        <li class="main "><a href="#user-manual-for-cfd-dem-simulation">User manual for CFD-DEM simulation</a></li>
        
            <li><a href="#installation"> &#9731; Installation</a></li>
        
            <li><a href="#examples-tutorials"> &#9731; Examples &amp; tutorials</a></li>
        
            <li><a href="#run-water-entry-example"> &#9731; Run water entry example</a></li>
        
            <li><a href="#paraview-rendering"> &#9731; Paraview Rendering</a></li>
        
            <li><a href="#modify-the-water-entry-parameters"> &#9731; Modify the water entry parameters</a></li>
        
    
    </ul>
</div></div> <!-- toc on top on mobile -->
            <div class="col-md-3 hidden-xs hidden-sm"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#_1"></a></li>
        
    
        <li class="main "><a href="#user-manual-for-cfd-dem-simulation">User manual for CFD-DEM simulation</a></li>
        
            <li><a href="#installation"> &#9731; Installation</a></li>
        
            <li><a href="#examples-tutorials"> &#9731; Examples &amp; tutorials</a></li>
        
            <li><a href="#run-water-entry-example"> &#9731; Run water entry example</a></li>
        
            <li><a href="#paraview-rendering"> &#9731; Paraview Rendering</a></li>
        
            <li><a href="#modify-the-water-entry-parameters"> &#9731; Modify the water entry parameters</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<div><h3 id="_1"></h3>
<p><a href="../user_manual/">User manual</a></p>
<hr>
<h3 id="user-manual-for-cfd-dem-simulation">User manual for CFD-DEM simulation</h3>
<h4 id="installation">Installation</h4>
<ul>
<li>
<p>Install prerequisites: the compilation requires <code>gcc</code>, <code>autoconf</code>, <code>automake</code>, <code>cmake</code>, <code>mpi</code>, <code>boost</code>, which can be obtained using</p>
<pre><code># For MacOS: use brew install, such as
brew install gcc autoconf automake cmake openmpi boost

# For Ubuntu: use apt-get install, such as
sudo apt-get install build-essential cmake
sudo apt-get install libopenmpi-dev openmpi-bin zlib1g-dev libboost-all-dev
sudo apt-get install flex bison gnuplot libreadline-dev libncurses-dev libxt-dev
</code></pre>
</li>
<li>
<p>Install <code>netdem</code> from <a href="https://github.com/apaam">https://github.com/apaam</a>.</p>
<pre><code>mkdir apaam
cd apaam

git clone https://github.com/apaam/netdem.git .
cd netdem
make
cd ..
</code></pre>
</li>
<li>
<p>Install <code>openfoam</code> from <a href="https://github.com/apaam">https://github.com/apaam</a>.</p>
<pre><code>git clone https://github.com/apaam/openfoam_customized.git .
cd openfoam_customized
make
cd ..
</code></pre>
</li>
<li>
<p>Init OpenFOAM environment by adding the following lines to and sourcing the <code>.bashrc</code> (where <code>$path_apaam</code> is the path of apaam)</p>
<pre><code>export APAAM_DIR=$path_apaam
export path_openfoam=$path_apaam/openfoam_customized/OpenFOAM-build
alias openfoam_init='source $path_openfoam/etc/bashrc'
openfoam_init
echo "using openfoam=$path_openfoam"
</code></pre>
</li>
<li>
<p>Install <code>cfddem</code> from <a href="https://github.com/apaam">https://github.com/apaam</a>.</p>
<pre><code>git clone https://github.com/apaam/cfddem.git .
cd cfddem
make
cd ..
</code></pre>
</li>
<li>
<p>Add the library and binary directory to system PATH in <code>.bashrc</code> (where <code>$path_apaam</code> is the path of apaam)</p>
<pre><code>export PATH=$PATH:$path_apaam/cfddem/build/bin
export PYTHONPATH=$path_apaam/netdem/build/lib
</code></pre>
</li>
</ul>
<h4 id="examples-tutorials">Examples &amp; tutorials</h4>
<p>Some preliminary examples are located under directory <code>examples/</code>, which can be run with, e.g., (in the example directory)</p>
<pre><code>    ./Allrun
</code></pre>
<p>Note if the <code>pynetdem</code> package cannot be imported into python, one might need to exiplictly add the path (e.g., <code>sys.path.append("/Users/lzhshou/Documents/Research/myProjects/apaam/repo/netdem/build/lib/")</code>) of the <code>netdem</code> python library in <code>createDEM.py</code>.</p>
<h4 id="run-water-entry-example">Run water entry example</h4>
<ul>
<li>
<p>Copy the example folder to a local directory</p>
<pre><code>cd cfddem
cp -rf examples/interIBdem/water_entry local/interIBdem/
</code></pre>
</li>
<li>
<p>Run the example</p>
<ul>
<li>Please note that <code>system/fvSolution</code> -&gt; <code>coupling</code> specifies the DEM file and function that will be invoked for the coupling.<pre><code>cd local/interIBdem/water_entry
./Allclean
./Allrun-parallel
</code></pre>
</li>
</ul>
</li>
<li>
<p>In case the run fails, please check the lib path has been correctly set in <code>createDEM.py</code>, where the path is the directory of netdem libs.</p>
</li>
</ul>
<h4 id="paraview-rendering">Paraview Rendering</h4>
<ul>
<li>
<p>Render CFD results</p>
<ul>
<li>Open <code>interIBdem.foam</code> to paraview</li>
<li>Change the properties <code>Type Case</code> to <code>Decomposed Case</code> and uncheck <code>Skip Zero Time</code> (optional)</li>
<li>Play with the result fields</li>
<li>Optinal: for viaulizeing interal filed results, one can use the <code>Clip</code> or <code>Slice</code> filter</li>
<li>Optinal: to construct the interface of the water and air, one can add <code>Contour</code> filter to <code>interIBdem.foam</code>, set <code>Contour by</code> to <code>alpha.water</code> and change the contour value to <code>0.5</code></li>
</ul>
</li>
<li>
<p>Render DEM results</p>
<ul>
<li>Open dem/particle_mesh_xxx.vtk.serries to paraview</li>
<li>Optional: select all particle_mesh_xxx.vtk.serries and add a <code>Group Datesets</code> filter</li>
<li>Optional: add a <code>Caculator</code> filter after the <code>Group Datesets</code> filter, set <code>Result Array Name</code> to <code>U</code>, and input formulation <code>vel</code>. This will add a <code>U</code> field to the particles, wihch can be linked with the CFD field <code>U</code></li>
<li>Optional: for probing the evolution of a property value with time, one can add a <code>Plot Data Over Time</code> filter to the <code>Group Datesets</code>, and change the <code>Field Associates</code> to <code>Cells</code>. Then, one can play with the property to show in the newly opened <code>Line Chart View</code></li>
</ul>
</li>
</ul>
<h4 id="modify-the-water-entry-parameters">Modify the water entry parameters</h4>
<ul>
<li>Fuild properties such as viscosity and density is specified in file <code>constant/transportProperties</code>. <ul>
<li>Please note that fuilds being used are speficied in <code>phases</code>.</li>
</ul>
</li>
<li>Geometries are determined by the <code>system/blockMeshDict</code>. Please note that when <code>scale</code> exist, the coordinates of the vertices with be multiplied by the scale when creating the real mesh.<ul>
<li>Mesh size are govened by the three values before <code>simpleGrading</code> in the <code>blocks</code> -&gt; <code>hex</code> entry. It is suggested to use cubic elements.</li>
</ul>
</li>
<li>The inital volume fraction of the fuilds are specifed in <code>system/setFiledsDict</code>. <ul>
<li>Please not that the <code>scale</code> parameter in <code>system/blockMeshDict</code> will not work here, thus the vertices here are their exact values.</li>
<li>Entry <code>box (-0.05 -0.05 -0.15) (0.05 0.05 0.03)</code> specifies the lower-left-front and upper-right-back coordicates of the box</li>
<li>Please note that the field entry <code>alpha.glycerol</code> should be consistent with that specified in <code>constant/transportProperties</code> -&gt; <code>phases</code></li>
</ul>
</li>
<li>File <code>system/controlDict</code> specifies the simulation time, timestep and writing interval, etc.</li>
<li>In <code>createDEM.py</code> -&gt; <code>oneSphere()</code> funciton, one can modify the DEM domain geometries and particle properties.<ul>
<li>Please note that in the present funciton, the parameter <code>scale</code> varies the size of the DEM domain, wall box and particle intertion region, whereas the <code>p_size</code> is the exact value of particle diameter.</li>
</ul>
</li>
</ul>
<hr>
<p><a href="../user_manual/">User manual</a></p></div></div>
            <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>Enter your search keywords below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
            
        </div>
        

        <footer class="footer">
           <div class="container">
              <p class="text-muted alignleft">
                  <span id="busuanzi_container_site_uv" style='display:none'>Vistors: <span id="busuanzi_value_site_uv"></span>. </span>
              </p>
              <p class="text-muted alignright">
                &copy; <a href="https://apaam.github.io/netdem_docs/about/acknowledgement/">NetDEM Team</a>. SYSU, HKUST.
              </p>
           </div>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../js/retina.min.js"></script>
        <!-- <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script> -->
        <script src="../../mathjax-config.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <script src="../../search/main.js"></script>
    </body>
</html>