<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="https://apaam.github.io/netdem_docs/img/favicon.ico">
        <meta name="keywords" content="Finite Element Library,Finite Element Code,Finite Element Method Library,Finite Element Method Code,Finite Element C++,Finite Element Method C++,Finite Element Library C++,Finite Element Code C++,FEM Code,FEM Library,FEM C++">
        <meta name="google-site-verification" content="45K56TawSdzbgy-uDtfJdYwp7zaVdL3fIAGYt869wwU" />
<!--	<title></title>  -->
        <title>NetDEM - Neural Network Enabled Discret Element Method</title>

        <link href="../../css/bootstrap-bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/highlight.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="https://apaam.github.io/netdem_docs/">NetDEM</a>
        </div>

        <script>var base_url = '../..';</script>
        <!-- <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script> -->

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="../">Examples</a>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                            <li >
                                 <a href="../../documentation/user_manual/">User manual</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../documentation/developer_manual/">Developer manual</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../documentation/dem_wiki/">DEM wiki</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../doxygen/html/">Code doxygen</a>
                            </li>
                        
                    
                    </ul>
                </li>
            
            
            
            
            
                <li >
                    <!-- Replace "nav_item.url|url" with "nav_item.url" for older mkdocs (before 1.0) -->
                    <a href="../../download/">Download</a>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Gallery <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                            <li >
                                 <a href="../../gallery/snapshots/">Snapshots</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../gallery/animations/">Animations</a>
                            </li>
                        
                    
                    </ul>
                </li>
            
            
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        
                            <li >
                                 <a href="../../about/help_%26_support/">Help & Support</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../about/publications/">Publications</a>
                            </li>
                        
                    
                        
                            <li >
                                 <a href="../../about/acknowledgement/">Acknowledgements</a>
                            </li>
                        
                    
                    </ul>
                </li>
            
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li class="nav-item">
                    <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                
                <li>
                    <a href="https://github.com/apaam/netdem_docs">
                        
                            <i class="fa fa-github-square"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        
        <div class="container">
            
            <div class="col-md-3 visible-xs visible-sm"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#_1"></a></li>
        
    
        <li class="main "><a href="#random-packing">Random packing</a></li>
        
            <li><a href="#whole-script"> &#9731; Whole script</a></li>
        
            <li><a href="#step-by-step-explaination"> &#9731; Step-by-step explaination</a></li>
        
            <li><a href="#simulation-result"> &#9731; Simulation result</a></li>
        
    
    </ul>
</div></div> <!-- toc on top on mobile -->
            <div class="col-md-3 hidden-xs hidden-sm"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#_1"></a></li>
        
    
        <li class="main "><a href="#random-packing">Random packing</a></li>
        
            <li><a href="#whole-script"> &#9731; Whole script</a></li>
        
            <li><a href="#step-by-step-explaination"> &#9731; Step-by-step explaination</a></li>
        
            <li><a href="#simulation-result"> &#9731; Simulation result</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<div><h3 id="_1"></h3>
<p><a href="../">Example</a>
┊ <a href="../">Previous</a>
┊ <a href="../blade_mixing/">Next</a></p>
<hr>
<h3 id="random-packing">Random packing</h3>
<h4 id="whole-script">Whole script</h4>
<p>The script is written in Python and utilizes the <code>netdem</code> library to perform a simulation. It sets up a simulation environment with a defined boundary, contact models, triangular meshes, particle packs, walls, gravity, data dumping, and runs the simulation. It is important to note that the script assumes the required <code>netdem</code> library is properly installed and accessible in the Python environment. </p>
<pre><code class="language-python">import netdem

sim = netdem.Simulation()
sim.domain_manager.SetBound(-0.6, -0.6, -0.6, 0.6, 0.6, 0.6)
sim.domain_manager.SetCellSpacing(0.3, 0.3, 0.3)

cnt_model = netdem.LinearSpring(2.0e6, 1.0e6, 0.7, 0.5)
cnt_model_prt = sim.scene.InsertContactModel(cnt_model)
sim.scene.SetNumberOfMaterials(1)
sim.scene.SetCollisionModel(0, 0, cnt_model_prt)

tri_mesh = netdem.TriMesh()
tri_mesh.InitFromSTL("data/particle_template.stl")
tri_mesh.Decimate(400)
tri_mesh.MakeConvex()
tri_mesh.AlignAxes()
tri_mesh.SetSize(0.1)
tri_mesh_ptr = sim.scene.InsertShape(tri_mesh)

pack_generator = netdem.PackGenerator()
particle_list = pack_generator.GetGridPack(1, 1, 0.2, 0, 0, 0.4, 5, 5, 1, tri_mesh_ptr)
for p in particle_list:
    p.SetVelocity(0, 0, -2.0)

wall_box = netdem.WallBoxPlane(1, 1, 1, 0, 0, 0)
wall_box.ImportToScene(sim.scene)

grav = netdem.Gravity()
grav.Init(sim)
sim.modifier_manager.Insert(grav)
sim.modifier_manager.Enable(grav.label)

data_dumper = netdem.DataDumper()
data_dumper.Init(sim)
data_dumper.SetRootPath("tmp/out/")
data_dumper.SetSaveByCycles(100)
data_dumper.dump_contact_info = True
data_dumper.dump_wall_info = True
data_dumper.SaveShapeInfoAsSTL()
sim.modifier_manager.Insert(data_dumper)
sim.modifier_manager.Enable(data_dumper.label)

for i in range(20):
    sim.scene.InsertParticle(particle_list)
    sim.Run(0.1)

sim.Run(2.0)
</code></pre>
<h4 id="step-by-step-explaination">Step-by-step explaination</h4>
<p>Below is a detailed documentation of the script, explaining each line and its purpose.</p>
<pre><code class="language-python">import netdem
</code></pre>
<p>This line imports the <code>netdem</code> module, which contains classes and functions necessary for the simulation.</p>
<pre><code class="language-python">sim = netdem.Simulation()
</code></pre>
<p>Creates an instance of the <code>Simulation</code> class and assigns it to the variable <code>sim</code>. This object will be used to manage the simulation.</p>
<pre><code class="language-python">sim.domain_manager.SetBound(-0.6, -0.6, -0.6, 0.6, 0.6, 0.6)
</code></pre>
<p>Sets the boundary of the simulation domain using the <code>SetBound</code> method of the <code>domain_manager</code> object. The specified coordinates (-0.6, -0.6, -0.6) and (0.6, 0.6, 0.6) define the minimum and maximum bounds of the simulation domain in three dimensions.</p>
<pre><code class="language-python">sim.domain_manager.SetCellSpacing(0.3, 0.3, 0.3)
</code></pre>
<p>Sets the cell spacing of the simulation domain using the <code>SetCellSpacing</code> method of the <code>domain_manager</code> object. The specified values (0.3, 0.3, 0.3) determine the size of each cell in the simulation domain grid.</p>
<pre><code class="language-python">cnt_model = netdem.LinearSpring(2.0e6, 1.0e6, 0.7, 0.5)
</code></pre>
<p>Creates an instance of the <code>LinearSpring</code> class from the <code>netdem</code> module and assigns it to the variable <code>cnt_model</code>. This model represents a linear spring with specified parameters: stiffness, damping, restitution, and friction.</p>
<pre><code class="language-python">cnt_model_prt = sim.scene.InsertContactModel(cnt_model)
</code></pre>
<p>Inserts the contact model (<code>cnt_model</code>) into the simulation scene using the <code>InsertContactModel</code> method of the <code>scene</code> object. The resulting contact model is assigned to the variable <code>cnt_model_prt</code> for later use.</p>
<pre><code class="language-python">sim.scene.SetNumberOfMaterials(1)
sim.scene.SetCollisionModel(0, 0, cnt_model_prt)
</code></pre>
<p>Sets the number of materials in the simulation scene to 1 and assigns the contact model (<code>cnt_model_prt</code>) to the collision model at index 0. These operations are performed using methods from the <code>scene</code> object.</p>
<pre><code class="language-python">tri_mesh = netdem.TriMesh()
</code></pre>
<p>Creates an instance of the <code>TriMesh</code> class from the <code>netdem</code> module and assigns it to the variable <code>tri_mesh</code>. This object represents a triangular mesh.</p>
<pre><code class="language-python">tri_mesh.InitFromSTL("data/particle_template.stl")
</code></pre>
<p>Initializes the <code>tri_mesh</code> object by loading a triangular mesh from an STL file located at "data/particle_template.stl". The provided STL file is used as a template for particles in the simulation.</p>
<pre><code class="language-python">tri_mesh.Decimate(400)
</code></pre>
<p>Decimates the loaded triangular mesh, reducing the number of polygons while preserving the overall shape. The size of the decimation is determined by the parameter 400.</p>
<pre><code class="language-python">tri_mesh.MakeConvex()
</code></pre>
<p>Converts the triangular mesh into a convex hull representation using the <code>MakeConvex</code> method. This step simplifies the geometry and improves simulation performance.</p>
<pre><code class="language-python">tri_mesh.AlignAxes()
</code></pre>
<p>Aligns the axes of the triangular mesh using the <code>AlignAxes</code> method. This step ensures that the mesh aligns properly with the simulation coordinate system.</p>
<pre><code class="language-python">tri_mesh.SetSize(0.1)
</code></pre>
<p>Sets the size of the triangular mesh using the <code>SetSize</code> method. The specified value (0.1) determines the new size of the mesh.</p>
<pre><code class="language-python">tri_mesh_ptr = sim.scene.InsertShape(tri_mesh)
</code></pre>
<p>Inserts the triangular mesh object into the simulation scene using the <code>InsertShape</code> method of the <code>scene</code> object. The resulting shape is assigned to the variable <code>tri_mesh_ptr</code> for later use.</p>
<pre><code class="language-python">pack_generator = netdem.PackGenerator()
</code></pre>
<p>Creates an instance of the <code>PackGenerator</code> class and assigns it to the variable <code>pack_generator</code>. This object is responsible for generating particle packs in the simulation.</p>
<pre><code class="language-python">particle_list = pack_generator.GetGridPack(1, 1, 0.2, 0, 0, 0.4, 5, 5, 1, tri_mesh_ptr)
</code></pre>
<p>Generates a grid-based particle pack using the <code>GetGridPack</code> method of the <code>pack_generator</code> object. The generated particles are assigned to the <code>particle_list</code> variable. The parameters provided determine the number of particles in each dimension of the grid (1 particle in the x-direction, 1 particle in the y-direction), the spacing between particles (0.2), the position of the origin of the grid (0, 0, 0.4), the number of particles in each dimension (5 particles in the x-direction, 5 particles in the y-direction), the height of the particle pack (1), and the shape pointer (<code>tri_mesh_ptr</code>) used as a template for the particles.</p>
<pre><code class="language-python">for p in particle_list:
    p.SetVelocity(0, 0, -2.0)
</code></pre>
<p>Sets the initial velocity of each particle in the <code>particle_list</code> to (0, 0, -2.0) using the <code>SetVelocity</code> method. This sets a downward velocity for the particles.</p>
<pre><code class="language-python">wall_box = netdem.WallBoxPlane(1, 1, 1, 0, 0, 0)
wall_box.ImportToScene(sim.scene)
</code></pre>
<p>Creates an instance of the <code>WallBoxPlane</code> class with specified dimensions (1, 1, 1) and position (0, 0, 0). Then, it imports the wall box object into the simulation scene using the <code>ImportToScene</code> method of the <code>wall_box</code> object. This creates a box-shaped wall in the simulation.</p>
<pre><code class="language-python">grav = netdem.Gravity()
grav.Init(sim)
sim.modifier_manager.Insert(grav)
sim.modifier_manager.Enable(grav.label)
</code></pre>
<p>Creates an instance of the <code>Gravity</code> class and assigns it to the variable <code>grav</code>. The <code>Init</code> method initializes the gravity object using the <code>sim</code> simulation object. The gravity object is then inserted into the modifier manager of the simulation and enabled. This ensures that gravity affects the particles in the simulation.</p>
<pre><code class="language-python">data_dumper = netdem.DataDumper()
data_dumper.Init(sim)
data_dumper.SetRootPath("tmp/out/")
data_dumper.SetSaveByCycles(100)
data_dumper.dump_contact_info = True
data_dumper.dump_wall_info = True
data_dumper.SaveShapeInfoAsSTL()
sim.modifier_manager.Insert(data_dumper)
sim.modifier_manager.Enable(data_dumper.label)
</code></pre>
<p>Creates an instance of the <code>DataDumper</code> class and assigns it to the variable <code>data_dumper</code>. The <code>Init</code> method initializes the data dumper object using the <code>sim</code> simulation object. The following lines specify various settings for the data dumper, such as the root path for saving files ("tmp/out/"), the save frequency (every 100 cycles), and the types of data to be dumped (contact information and wall information). Additionally, the <code>SaveShapeInfoAsSTL</code> method is called to enable saving shape information as STL files. Finally, the data dumper object is inserted into the modifier manager of the simulation and enabled.</p>
<pre><code class="language-python">for i in range(20):
    sim.scene.InsertParticle(particle_list)
    sim.Run(0.1)
</code></pre>
<p>In a loop that iterates 20 times, particles from the <code>particle_list</code> are inserted into the simulation scene using the <code>InsertParticle</code> method. Then, the simulation is run for a duration of 0.1 time units using the <code>Run</code> method. This loop allows the particles to settle in the simulation before further simulation steps.</p>
<pre><code class="language-python">sim.Run(2.0)
</code></pre>
<p>Finally, the simulation is run for a duration of 2.0 time units using the <code>Run</code> method. This completes the simulation process.</p>
<h4 id="simulation-result">Simulation result</h4>
<hr>
<p><a href="../">Example</a>
┊ <a href="../">Previous</a>
┊ <a href="../blade_mixing/">Next</a></p></div></div>
            <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>Enter your search keywords below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
            
        </div>
        

        <footer class="footer">
           <div class="container">
              <p class="text-muted alignleft">
                  <span id="busuanzi_container_site_uv" style='display:none'>Vistors: <span id="busuanzi_value_site_uv"></span>. </span>
              </p>
              <p class="text-muted alignright">
                &copy; <a href="https://apaam.github.io/netdem_docs/about/acknowledgement/">NetDEM Team</a>. SYSU, HKUST.
              </p>
           </div>
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script src="../../js/base.js"></script>
        <script src="../../js/retina.min.js"></script>
        <!-- <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script> -->
        <script src="../../mathjax-config.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
        <script src="../../search/main.js"></script>
    </body>
</html>